import{Q as m}from"./QCardSection.7271dc83.js";import{Q as f}from"./QSeparator.11b0327f.js";import{Q as S}from"./QTable.59e75ca2.js";import{a as q}from"./QBtn.7098aa78.js";import{Q as y}from"./QCardActions.f4edf610.js";import{Q as z}from"./QCard.591787c0.js";import{u as C,r as _,D as k,N as B,d as r,G as i,K as D,ai as R,M as d,J as $,z as A,ah as L}from"./index.26963b99.js";import{api as v}from"./axios.c6a8af05.js";import"./use-align.e2bec4c8.js";import"./use-dark.1e17e384.js";import"./QItem.e5d0df39.js";import"./scroll.ea4e240c.js";import"./use-key-composition.710c5c77.js";import"./format.a33550d6.js";import"./selection.75840580.js";import"./use-checkbox.894192df.js";import"./index.2cf0d985.js";const N={class:"q-pa-md items-start q-gutter-md"},E=d("div",{class:"text-h6"},"\u914D\u4FE1\u306EURL",-1),U={class:"text-h6"},V={class:"q-pa-md"},se={setup(G){D();const l=R(),u=C(),h=[{name:"user",label:"\u30E6\u30FC\u30B6",field:"user",align:"left"},{name:"org",label:"\u7D44\u7E54",field:"org",align:"left"},{name:"aal",label:"AAL",field:"aal",align:"left"},{name:"trade_id",label:"\u53D6\u5F15ID",field:"trade_id",align:"left"}],c=_([]),e=_([]),w=l.params.target,b=a=>"",Q=(a,t,o)=>`${o}\u9805\u76EE\u4E2D${a}\uFF5E${t}\u9805\u76EE\u3092\u8868\u793A\u4E2D`,p=()=>{v.get("/cadde/api/v4/ui/authorization",{params:{target:w}}).then(a=>{let t=a.data,o=[];t.forEach(function(s,g){let n=null;"contract"in s?n={index:g,user:s.permission.assignee.user,org:s.permission.assignee.org,aal:s.permission.assignee.aal,trade_id:s.contract.trade_id}:n={index:g,user:s.permission.assignee.user,org:s.permission.assignee.org,aal:s.permission.assignee.aal,trade_id:null},o.push(n)}),c.value=o}).catch(function(a){console.log(a)})},x=()=>{let a={};e.value[0].trade_id!=null?a={permission:{target:l.params.target,assigner:u.cadde_user_id},contract:{trade_id:e.value[0].trade_id}}:(typeof e.value[0].user=="undefined"&&(e.value[0].user=null),typeof e.value[0].org=="undefined"&&(e.value[0].org=null),typeof e.value[0].aal=="undefined"&&(e.value[0].aal=null),a={permission:{target:l.params.target,assigner:u.cadde_user_id,assignee:{user:e.value[0].user,org:e.value[0].org,aal:e.value[0].aal,extras:null}}}),v.delete("/cadde/api/v4/ui/authorization",{data:a}).then(function(t){p()}).catch(function(t){console.log(t)})};return p(),(a,t)=>(k(),B("div",N,[r(z,{class:"shadow-24 q-pa-lg"},{default:i(()=>[r(m,null,{default:i(()=>[E]),_:1}),r(f),r(m,null,{default:i(()=>[d("div",U,$(a.$route.params.target),1)]),_:1}),r(f),r(S,{columns:h,rows:c.value,title:"\u8A8D\u53EF",separator:"vertical",selection:"single","row-key":"index","rows-per-page-options":[0,10],"rows-per-page-label":"\u8868\u793A\u6570","selected-rows-label":b,selected:e.value,"onUpdate:selected":t[0]||(t[0]=o=>e.value=o),"pagination-label":Q},null,8,["rows","selected"]),r(y,{class:"q-px-md"},{default:i(()=>[A(d("div",V,[r(q,{onClick:x,label:"\u8A8D\u53EF\u524A\u9664",color:"negative"})],512),[[L,e.value.length!=0]])]),_:1})]),_:1})]))}};export{se as default};
