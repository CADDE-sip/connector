var G=Object.defineProperty,L=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var z=(e,s,o)=>s in e?G(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,f=(e,s)=>{for(var o in s||(s={}))D.call(s,o)&&z(e,o,s[o]);if(B)for(var o of B(s))w.call(s,o)&&z(e,o,s[o]);return e},C=(e,s)=>L(e,O(s));var A=(e,s)=>{var o={};for(var t in e)D.call(e,t)&&s.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&B)for(var t of B(e))s.indexOf(t)<0&&w.call(e,t)&&(o[t]=e[t]);return o};import{Q}from"./QInput.6486aab7.js";import{Q as y}from"./QCardSection.7271dc83.js";import{Q as W,a as E}from"./QBtn.7098aa78.js";import{u as M,a as P,b as $}from"./use-checkbox.894192df.js";import{c as I,h as H,e as J}from"./use-align.e2bec4c8.js";import{c as v,h as c,u as K,r as h,D as F,N as T,d as u,G as g,K as X,z as q,ah as k,M as V,H as Y,J as Z,a3 as ee}from"./index.26963b99.js";import{a as le,h as ae}from"./use-key-composition.710c5c77.js";import{Q as j}from"./QCardActions.f4edf610.js";import{Q as oe}from"./QForm.7914f2da.js";import{Q as se}from"./QCard.591787c0.js";import{api as ne}from"./axios.c6a8af05.js";import"./use-dark.1e17e384.js";import"./format.a33550d6.js";import"./index.2cf0d985.js";var S=I({name:"QToggle",props:C(f({},M),{icon:String,iconColor:String}),emits:P,setup(e){function s(o,t){const r=v(()=>(o.value===!0?e.checkedIcon:t.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),l=v(()=>o.value===!0?e.iconColor:null);return()=>[c("div",{class:"q-toggle__track"}),c("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},r.value!==void 0?[c(W,{name:r.value,color:l.value})]:void 0)]}return $("toggle",s)}}),te=I({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:s}){const o=v(()=>{const t=["unelevated","outline","flat","rounded","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${t.length>0?" "+t:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>c("div",{class:o.value},H(s.default))}}),ue=I({name:"QBtnToggle",props:C(f({},le),{modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","clear","click"],setup(e,{slots:s,emit:o}){const t=v(()=>e.options.find(n=>n.value===e.modelValue)!==void 0),r=v(()=>({type:"hidden",name:e.name,value:e.modelValue})),l=ae(r),m=v(()=>e.options.map((n,a)=>{const U=n,{attrs:_,value:b,slot:N}=U,d=A(U,["attrs","value","slot"]);return{slot:N,props:C(f(f({key:a,onClick(R){x(b,n,R)},"aria-pressed":b===e.modelValue?"true":"false"},_),d),{outline:e.outline,flat:e.flat,rounded:e.rounded,push:e.push,unelevated:e.unelevated,dense:e.dense,disable:e.disable===!0||d.disable===!0,color:b===e.modelValue?i(d,"toggleColor"):i(d,"color"),textColor:b===e.modelValue?i(d,"toggleTextColor"):i(d,"textColor"),noCaps:i(d,"noCaps")===!0,noWrap:i(d,"noWrap")===!0,size:i(d,"size"),padding:i(d,"padding"),ripple:i(d,"ripple"),stack:i(d,"stack")===!0,stretch:i(d,"stretch")===!0})}}));function x(n,a,_){e.readonly!==!0&&(e.modelValue===n?e.clearable===!0&&(o("update:modelValue",null,null),o("clear")):o("update:modelValue",n,a),o("click",_))}function i(n,a){return n[a]===void 0?e[a]:n[a]}function p(){const n=m.value.map(a=>c(E,a.props,a.slot!==void 0?s[a.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&t.value===!0&&l(n,"push"),J(s.default,n)}return()=>c(te,{class:"q-btn-toggle",outline:e.outline,flat:e.flat,rounded:e.rounded,push:e.push,stretch:e.stretch,unelevated:e.unelevated,glossy:e.glossy,spread:e.spread},p)}});const re={class:"q-pa-md items-start q-gutter-md"},ie=V("div",{class:"q-px-md text-h6"},"\u8A8D\u53EF\u767B\u9332",-1),de={key:0,class:"q-pa-md"},me={class:"q-pa-md"},ge={style:{color:"red"}},Se={setup(e){X();const s=K(),o=h(!1),t=h(!1),r=h(!1),l=h({permission:{target:null,assigner:s.cadde_user_id,assignee:{user:null,org:null,aal:null,extras:null}}});let m=h("");const x=()=>l.value.permission.target!=null&&l.value.permission.target!=""&&(o.value&&l.value.permission.assignee.user!=null&&l.value.permission.assignee.user!=""||t.value&&l.value.permission.assignee.org!=null&&l.value.permission.assignee.org!=""||r.value&&l.value.permission.assignee.aal!=null&&l.value.permission.assignee.aal!=""),i=()=>{m.value="",(o.value==!1||l.value.permission.assignee.user=="")&&(l.value.permission.assignee.user=null),(t.value==!1||l.value.permission.assignee.org=="")&&(l.value.permission.assignee.org=null),(r.value==!1||l.value.permission.assignee.aal=="")&&(l.value.permission.assignee.aal=null),l.value.permission.target==null||l.value.permission.target==""?m.value="\u914D\u4FE1\u306EURL\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044":l.value.permission.target.length>=255?m.value="\u914D\u4FE1\u306EURL\u306F255\u6587\u5B57\u4EE5\u5185\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044":l.value.permission.assignee.user==null&&l.value.permission.assignee.org==null&&l.value.permission.assignee.aal==null?m.value="\u5C11\u306A\u304F\u3068\u3082\u3072\u3068\u3064\u306E\u8A8D\u53EF\u306E\u6761\u4EF6\u3092\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044":ne.post("/cadde/api/v4/ui/authorization",l.value).then(function(p){m.value="\u8A8D\u53EF\u3092\u8A2D\u5B9A\u3057\u307E\u3057\u305F"}).catch(function(p){console.log(p),m.value="\u8A8D\u53EF\u3092\u8A2D\u5B9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F"})};return(p,n)=>(F(),T("div",re,[u(se,{square:"",class:"shadow-24 q-pa-lg"},{default:g(()=>[ie,u(oe,null,{default:g(()=>[u(y,null,{default:g(()=>[u(Q,{ref:"urlval",modelValue:l.value.permission.target,"onUpdate:modelValue":n[0]||(n[0]=a=>l.value.permission.target=a),type:"text","lazy-rules":"",label:"\u914D\u4FE1\u306EURL(\u4F7F\u7528\u53EF\u80FD\u6587\u5B57\u306F\u534A\u89D2\u82F1\u6570\u3001\u30CF\u30A4\u30D5\u30F3\u3001\u30A2\u30F3\u30C0\u30FC\u30D0\u30FC\u306E\u307F)",rules:[a=>!!a||"Field is required",a=>a.length<=255||"255\u6587\u5B57\u4EE5\u5185\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"]},null,8,["modelValue","rules"])]),_:1}),u(y,null,{default:g(()=>[u(S,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=a=>o.value=a),label:"\u30E6\u30FC\u30B6\u306B\u5BFE\u3059\u308B\u8A8D\u53EF"},null,8,["modelValue"]),q(V("div",null,[u(Q,{modelValue:l.value.permission.assignee.user,"onUpdate:modelValue":n[2]||(n[2]=a=>l.value.permission.assignee.user=a),type:"text","lazy-rules":"",label:"\u30E6\u30FC\u30B6\u306ECADDE\u30E6\u30FC\u30B6ID",rules:[a=>a.length<=255||"255\u6587\u5B57\u4EE5\u5185\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"]},null,8,["modelValue","rules"])],512),[[k,o.value]])]),_:1}),u(y,null,{default:g(()=>[u(S,{modelValue:t.value,"onUpdate:modelValue":n[3]||(n[3]=a=>t.value=a),label:"\u7D44\u7E54\u306B\u5BFE\u3059\u308B\u8A8D\u53EF"},null,8,["modelValue"]),q(V("div",null,[u(Q,{modelValue:l.value.permission.assignee.org,"onUpdate:modelValue":n[4]||(n[4]=a=>l.value.permission.assignee.org=a),type:"text","lazy-rules":"",label:"\u7D44\u7E54\u306ECADDE\u30E6\u30FC\u30B6ID",rules:[a=>a.length<=255||"255\u6587\u5B57\u4EE5\u5185\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"]},null,8,["modelValue","rules"])],512),[[k,t.value]])]),_:1}),u(y,null,{default:g(()=>[u(S,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=a=>r.value=a),label:"\u5F53\u4EBA\u8A8D\u8A3C\u30EC\u30D9\u30EB\u306B\u5BFE\u3059\u308B\u8A8D\u53EF"},null,8,["modelValue"]),r.value?(F(),T("div",de,[u(ue,{modelValue:l.value.permission.assignee.aal,"onUpdate:modelValue":n[6]||(n[6]=a=>l.value.permission.assignee.aal=a),"toggle-color":"primary",options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}]},null,8,["modelValue"])])):Y("",!0)]),_:1}),u(j,{class:"q-px-md"},{default:g(()=>[q(V("div",me,[u(E,{onClick:i,color:"primary",label:"\u8A8D\u53EF\u8A2D\u5B9A"})],512),[[k,x()]])]),_:1}),u(j,{class:"q-px-lg"},{default:g(()=>[V("span",ge,Z(ee(m)),1)]),_:1})]),_:1})]),_:1})]))}};export{Se as default};
