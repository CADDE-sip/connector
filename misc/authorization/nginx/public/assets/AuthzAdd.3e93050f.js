var G=Object.defineProperty,L=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var U=(e,s,o)=>s in e?G(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,f=(e,s)=>{for(var o in s||(s={}))D.call(s,o)&&U(e,o,s[o]);if(B)for(var o of B(s))w.call(s,o)&&U(e,o,s[o]);return e},C=(e,s)=>L(e,O(s));var A=(e,s)=>{var o={};for(var t in e)D.call(e,t)&&s.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&B)for(var t of B(e))s.indexOf(t)<0&&w.call(e,t)&&(o[t]=e[t]);return o};import{Q}from"./QInput.785d7396.js";import{Q as y}from"./QCardSection.1a5371cb.js";import{Q as W,a as E}from"./QBtn.a19a244d.js";import{u as $,a as M,b as P}from"./use-checkbox.31bfc923.js";import{c as z,h as H,e as J}from"./use-align.4d382a04.js";import{c as v,h as c,u as K,r as h,D as F,N as T,d as u,G as g,K as Z,z as q,ah as k,M as V,H as X,J as Y,a3 as ee}from"./index.4807e50e.js";import{a as le,h as ae}from"./use-key-composition.8087b535.js";import{Q as j}from"./QCardActions.96b23613.js";import{Q as oe}from"./QForm.a91179b4.js";import{Q as se}from"./QCard.a6b5ad13.js";import{api as ne}from"./axios.3dfbc1c7.js";import"./use-dark.e99ac626.js";import"./format.a33550d6.js";import"./index.2cf0d985.js";var S=z({name:"QToggle",props:C(f({},$),{icon:String,iconColor:String}),emits:M,setup(e){function s(o,t){const r=v(()=>(o.value===!0?e.checkedIcon:t.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),a=v(()=>o.value===!0?e.iconColor:null);return()=>[c("div",{class:"q-toggle__track"}),c("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},r.value!==void 0?[c(W,{name:r.value,color:a.value})]:void 0)]}return P("toggle",s)}}),te=z({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:s}){const o=v(()=>{const t=["unelevated","outline","flat","rounded","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${t.length>0?" "+t:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>c("div",{class:o.value},H(s.default))}}),ue=z({name:"QBtnToggle",props:C(f({},le),{modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","clear","click"],setup(e,{slots:s,emit:o}){const t=v(()=>e.options.find(n=>n.value===e.modelValue)!==void 0),r=v(()=>({type:"hidden",name:e.name,value:e.modelValue})),a=ae(r),m=v(()=>e.options.map((n,l)=>{const I=n,{attrs:_,value:b,slot:N}=I,d=A(I,["attrs","value","slot"]);return{slot:N,props:C(f(f({key:l,onClick(R){x(b,n,R)},"aria-pressed":b===e.modelValue?"true":"false"},_),d),{outline:e.outline,flat:e.flat,rounded:e.rounded,push:e.push,unelevated:e.unelevated,dense:e.dense,disable:e.disable===!0||d.disable===!0,color:b===e.modelValue?i(d,"toggleColor"):i(d,"color"),textColor:b===e.modelValue?i(d,"toggleTextColor"):i(d,"textColor"),noCaps:i(d,"noCaps")===!0,noWrap:i(d,"noWrap")===!0,size:i(d,"size"),padding:i(d,"padding"),ripple:i(d,"ripple"),stack:i(d,"stack")===!0,stretch:i(d,"stretch")===!0})}}));function x(n,l,_){e.readonly!==!0&&(e.modelValue===n?e.clearable===!0&&(o("update:modelValue",null,null),o("clear")):o("update:modelValue",n,l),o("click",_))}function i(n,l){return n[l]===void 0?e[l]:n[l]}function p(){const n=m.value.map(l=>c(E,l.props,l.slot!==void 0?s[l.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&t.value===!0&&a(n,"push"),J(s.default,n)}return()=>c(te,{class:"q-btn-toggle",outline:e.outline,flat:e.flat,rounded:e.rounded,push:e.push,stretch:e.stretch,unelevated:e.unelevated,glossy:e.glossy,spread:e.spread},p)}});const re={class:"q-pa-md items-start q-gutter-md"},ie=V("div",{class:"q-px-md text-h6"},"\u8A8D\u53EF\u767B\u9332",-1),de={key:0,class:"q-pa-md"},me={class:"q-pa-md"},ge={style:{color:"red"}},Se={setup(e){Z();const s=K(),o=h(!1),t=h(!1),r=h(!1),a=h({permission:{target:null,assigner:s.cadde_user_id,assignee:{user:null,org:null,aal:null,extras:null}}});let m=h("");const x=()=>a.value.permission.target!=null&&a.value.permission.target!=""&&(o.value&&a.value.permission.assignee.user!=null&&a.value.permission.assignee.user!=""||t.value&&a.value.permission.assignee.org!=null&&a.value.permission.assignee.org!=""||r.value&&a.value.permission.assignee.aal!=null&&a.value.permission.assignee.aal!=""),i=()=>{m.value="",(o.value==!1||a.value.permission.assignee.user=="")&&(a.value.permission.assignee.user=null),(t.value==!1||a.value.permission.assignee.org=="")&&(a.value.permission.assignee.org=null),(r.value==!1||a.value.permission.assignee.aal=="")&&(a.value.permission.assignee.aal=null),a.value.permission.target==null||a.value.permission.target==""?m.value="\u914D\u4FE1\u306EURL\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044":a.value.permission.target.length>=255?m.value="\u914D\u4FE1\u306EURL\u306F255\u6587\u5B57\u4EE5\u5185\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044":a.value.permission.assignee.user==null&&a.value.permission.assignee.org==null&&a.value.permission.assignee.aal==null?m.value="\u5C11\u306A\u304F\u3068\u3082\u3072\u3068\u3064\u306E\u8A8D\u53EF\u306E\u6761\u4EF6\u3092\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044":ne.post("/cadde/api/v4/ui/authorization",a.value).then(function(p){m.value="\u8A8D\u53EF\u3092\u8A2D\u5B9A\u3057\u307E\u3057\u305F"}).catch(function(p){console.log(p),m.value="\u8A8D\u53EF\u3092\u8A2D\u5B9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F"})};return(p,n)=>(F(),T("div",re,[u(se,{square:"",class:"shadow-24 q-pa-lg"},{default:g(()=>[ie,u(oe,null,{default:g(()=>[u(y,null,{default:g(()=>[u(Q,{ref:"urlval",modelValue:a.value.permission.target,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.permission.target=l),type:"text","lazy-rules":"",label:"\u8A8D\u53EF\u306E\u5BFE\u8C61\u3068\u3059\u308BURL\uFF08\u6700\u5927\u6587\u5B57\u6570\u306F255\u5B57\u4EE5\u5185\uFF09",rules:[l=>!!l||"Field is required",l=>l.length<=255||"255\u6587\u5B57\u4EE5\u5185\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",l=>/^[a-zA-Z0-9!-/:-@Â¥[-`{-~]*$/.test(l)||"\u4F7F\u7528\u53EF\u80FD\u6587\u5B57\u306E\u307F\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"]},null,8,["modelValue","rules"])]),_:1}),u(y,null,{default:g(()=>[u(S,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=l=>o.value=l),label:"\u30E6\u30FC\u30B6\u306B\u5BFE\u3059\u308B\u8A8D\u53EF"},null,8,["modelValue"]),q(V("div",null,[u(Q,{modelValue:a.value.permission.assignee.user,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.permission.assignee.user=l),type:"text","lazy-rules":"",label:"\u30E6\u30FC\u30B6\u306ECADDE\u30E6\u30FC\u30B6ID",rules:[l=>l.length<=255||"255\u6587\u5B57\u4EE5\u5185\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"]},null,8,["modelValue","rules"])],512),[[k,o.value]])]),_:1}),u(y,null,{default:g(()=>[u(S,{modelValue:t.value,"onUpdate:modelValue":n[3]||(n[3]=l=>t.value=l),label:"\u7D44\u7E54\u306B\u5BFE\u3059\u308B\u8A8D\u53EF"},null,8,["modelValue"]),q(V("div",null,[u(Q,{modelValue:a.value.permission.assignee.org,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.permission.assignee.org=l),type:"text","lazy-rules":"",label:"\u7D44\u7E54\u306ECADDE\u30E6\u30FC\u30B6ID",rules:[l=>l.length<=255||"255\u6587\u5B57\u4EE5\u5185\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"]},null,8,["modelValue","rules"])],512),[[k,t.value]])]),_:1}),u(y,null,{default:g(()=>[u(S,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=l=>r.value=l),label:"\u5F53\u4EBA\u8A8D\u8A3C\u30EC\u30D9\u30EB\u306B\u5BFE\u3059\u308B\u8A8D\u53EF"},null,8,["modelValue"]),r.value?(F(),T("div",de,[u(ue,{modelValue:a.value.permission.assignee.aal,"onUpdate:modelValue":n[6]||(n[6]=l=>a.value.permission.assignee.aal=l),"toggle-color":"primary",options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}]},null,8,["modelValue"])])):X("",!0)]),_:1}),u(j,{class:"q-px-md"},{default:g(()=>[q(V("div",me,[u(E,{onClick:i,color:"primary",label:"\u8A8D\u53EF\u8A2D\u5B9A"})],512),[[k,x()]])]),_:1}),u(j,{class:"q-px-lg"},{default:g(()=>[V("span",ge,Y(ee(m)),1)]),_:1})]),_:1})]),_:1})]))}};export{Se as default};
