import{Q as h}from"./QCardSection.1a5371cb.js";import{Q as w}from"./QSeparator.7124cf34.js";import{Q as k}from"./QTable.4a7e0b5a.js";import{a as B}from"./QBtn.a19a244d.js";import{Q as b}from"./QCardActions.96b23613.js";import{Q as D}from"./QCard.a6b5ad13.js";import{u as R,r as n,D as $,N as A,d as s,G as l,K as L,ai as N,M as i,J as g,z as E,ah as U,a3 as Q}from"./index.4807e50e.js";import{api as x}from"./axios.3dfbc1c7.js";import"./use-align.4d382a04.js";import"./use-dark.e99ac626.js";import"./QItem.daaccf7f.js";import"./scroll.baa07e36.js";import"./use-key-composition.8087b535.js";import"./format.a33550d6.js";import"./selection.19ed9549.js";import"./use-checkbox.31bfc923.js";import"./index.2cf0d985.js";const V={class:"q-pa-md items-start q-gutter-md"},G=i("div",{class:"text-h6"},"\u914D\u4FE1\u306EURL",-1),I={class:"text-h6"},J={class:"q-pa-md"},K={style:{color:"red"}},M={style:{color:"red"}},ne={setup(O){L();const d=N(),m=R(),y=[{name:"user",label:"\u30E6\u30FC\u30B6",field:"user",align:"left"},{name:"org",label:"\u7D44\u7E54",field:"org",align:"left"},{name:"aal",label:"AAL",field:"aal",align:"left"},{name:"trade_id",label:"\u53D6\u5F15ID",field:"trade_id",align:"left"}],f=n([]),e=n([]),S=d.params.target,q=a=>"",z=(a,t,o)=>`${o}\u9805\u76EE\u4E2D${a}\uFF5E${t}\u9805\u76EE\u3092\u8868\u793A\u4E2D`;let u=n(""),c=n("");const _=()=>{u.value="",x.get("/cadde/api/v4/ui/authorization",{params:{target:S}}).then(a=>{let t=a.data,o=[];t.forEach(function(r,v){let p=null;"contract"in r?p={index:v,user:r.permission.assignee.user,org:r.permission.assignee.org,aal:r.permission.assignee.aal,trade_id:r.contract.trade_id}:p={index:v,user:r.permission.assignee.user,org:r.permission.assignee.org,aal:r.permission.assignee.aal,trade_id:null},o.push(p)}),f.value=o}).catch(function(a){console.log(a),u.value="\u8A8D\u53EF\u8A73\u7D30\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F"})},C=()=>{let a={};c.value="",e.value[0].trade_id!=null?a={permission:{target:d.params.target,assigner:m.cadde_user_id},contract:{trade_id:e.value[0].trade_id}}:(typeof e.value[0].user=="undefined"&&(e.value[0].user=null),typeof e.value[0].org=="undefined"&&(e.value[0].org=null),typeof e.value[0].aal=="undefined"&&(e.value[0].aal=null),a={permission:{target:d.params.target,assigner:m.cadde_user_id,assignee:{user:e.value[0].user,org:e.value[0].org,aal:e.value[0].aal,extras:null}}}),x.delete("/cadde/api/v4/ui/authorization",{data:a}).then(function(t){_()}).catch(function(t){console.log(t),c.value="\u8A8D\u53EF\u3092\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F"})};return _(),(a,t)=>($(),A("div",V,[s(D,{class:"shadow-24 q-pa-lg"},{default:l(()=>[s(h,null,{default:l(()=>[G]),_:1}),s(w),s(h,null,{default:l(()=>[i("div",I,g(a.$route.params.target),1)]),_:1}),s(w),s(k,{columns:y,rows:f.value,title:"\u8A8D\u53EF",separator:"vertical",selection:"single","row-key":"index","rows-per-page-options":[0,10],"rows-per-page-label":"\u8868\u793A\u6570","selected-rows-label":q,selected:e.value,"onUpdate:selected":t[0]||(t[0]=o=>e.value=o),"pagination-label":z},null,8,["rows","selected"]),s(b,{class:"q-px-md"},{default:l(()=>[E(i("div",J,[s(B,{onClick:C,label:"\u8A8D\u53EF\u524A\u9664",color:"negative"})],512),[[U,e.value.length!=0]])]),_:1}),s(b,{class:"q-px-lg"},{default:l(()=>[i("span",K,g(Q(u)),1),i("span",M,g(Q(c)),1)]),_:1})]),_:1})]))}};export{ne as default};
